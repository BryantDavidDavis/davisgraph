var finishedbutton=$("<ul class='small-block-grid-2 small-centered medium-block-grid-4 large-block-grid-6 columns centered'><li><a id='finished-button' class='button small info'>Finished</a></li></ul>"),editbutton="<a class='item'><i class='fi-pencil'></i></a>",bindForm=function(e,t,o){var i="<form class='edit-photo-details-form'><div class='row collapse'><div class='small-10 centered columns'><input type='hidden' name='id' value='"+o+"'/><input type='hidden' name='fieldname' value='"+e+"'/><input type='text' name='content' placeholder='"+t+"' value='"+t+"'></div><div class='small-2 centered columns'><a href='#' class='button postfix model-col-update-ajax'><i class='fi-check'></i></a></div></div></form>";return i},originalDiv=function(e,t,o){var i;return i="title"===o?'<h3 class="editable" photo-id="'+t+'" model-col="title"><span>'+e+"</span></h3>":'<p class="editable" photo-id="'+t+'" model-col="description"><span>'+e+"</span></p>",'<div class="row"><div class="small-12 medium-10 large-10 small-centered text-center columns">'+i+"</div></div>"},commentDiv=function(e){return'<div class="row comment-row"><div class="small-12 medium-10 large-10 small-centered text-center columns"><p photo-id="'+e.photo_id+'" model-col="comment"><span>'+e.comment+"</span></p></div></div>"},photo_id=$("img").attr("photo-id");$("#photo-update").on("click",function(e){e.preventDefault();var t=$(".editable").find("span");$(editbutton).insertBefore(t),$(".exit-off-canvas").trigger("click"),$("body").on("click",".item",function(){var e=$(this).parent().attr("model-col"),t=$(this).parent().find("span").text();$(this).closest("div").replaceWith(bindForm(e,t,photo_id))})}),$("body").on("click",".model-col-update-ajax",function(e){$(this).closest("form").find('input[name="content"]');$.ajax({url:"/photos/updateField",type:"post",data:$(this).closest("form").serialize(),success:function(t){$(e.target).closest(".edit-photo-details-form").replaceWith(originalDiv(t.newcontent,photo_id,t.modelcol))},error:function(e){alert(e.responseText)}})}),$("#comment-submit").on("click",function(e){e.preventDefault(),$.ajax({url:"/comments/storeComment",type:"post",data:$(this).closest("form").serialize(),success:function(e){$(".comment-row").length?$(".comment-row").last().after(commentDiv(e)):$(".description-row").last().after(commentDiv(e))},error:function(e){alert(e.responseText)}})});